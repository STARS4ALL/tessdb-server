Prioridad Alta
==============

*) Refactor
   tocar el fichero de config:
   - plantilla de Ansible, 
   - ejemplo x2(win,lin) 
   - host crater para pruebas
   - host astrix
   hacer pruebas locales en crater vs mosquitto

*) Estudiar porque se muere de repente el cliente MQTT 

 - se muere porque no responden con PINGACK dentro del perioddo y hace un self.transport.loseconnection
 - Subir el periodo y cambiar a self.disconnect en la MQTT library

*) Poner log.warn a los 3 casos de discard messages para averiguar que esta pasando con esto:
		2016-10-19T13:00:14+0000 [mqtt.client.factory.MQTTFactory#info] Starting factory <mqtt.client.factory.MQTTFactory instance at 0x76157f80>
		2016-10-19T13:00:14+0000 [mqtt#info] no need to unsubscribe
		2016-10-19T13:00:14+0000 [mqtt#info] Subscribing to topics=[('STARS4ALL/register', 2), ('STARS4ALL/+/reading', 2)]
		2016-10-19T13:00:14+0000 [mqtt#info] Connected and subscribed to tcp:astrix.fis.ucm.es:1883
		2016-10-19T13:00:25+0000 [dbase#info] End sunrise/sunset computation process
		2016-10-19T14:00:14+0000 [dbase#info] Sunrise Task: ON BOOT = False today = 2016/10/19 12:00:00
		2016-10-19T14:00:14+0000 [mqtt#info] MQTT Stats [Total, Reads, Register, Discard] = [725, 708, 0, 17]


Prioridad baja
=============

*) Renombra la columnas frequency y magnitude a frequency1 y magnitude1 en previsiónde una posible
evolución hacia un TESS multicanal. (frequency2,magnitude2, frequency3,magnitude3, etc.)
*) Meter mas metadatos a los instrumentos (ver addednum)
 - Esto implica cambios en el firmware, en el protocolo JSON/MQTT y en la BD
 - hay que hacerlo de forma coordinada.
 - Mantener compatibilidad con rev: 1
 - No snowflakes en la BD, "aplanar campos" canal1, canal2, canal3, canal4 
 - muchos de los metadatos irán en la info de mensaje de registro del TESS.
*) Estudiar si merece la pena poner nuevas constraints UNIQUE NOT NULL a tess_t.name y tess_t.mac_address
*) Embeber servidor web de twisted.

ADDENDUM
========

Formato estándar de IDA-IAU con info de la siguiente cabecera:

# Device type: TESS-V1
# Data supplier: Alejandro Sanchez de Miguel  / UCM
# Local timezone: UTC+1
# Time Synchronization: NTP
# Moving / Stationary position: STATIONARY
# Moving / Fixed look direction: FIXED
# Number of channels: 1
# Filters per channel: HOYA CM-500
# Measurement direction per channel: 0., 0.
# Field of view: 20

Otro descriptor de las cabeceras que se usan actualmente es # Device type: SQM-LU
# SQM cover offset value: -0.11
pero en nuestro caso la calibración se realizará con la carcasa (a través de la ventana) y no es relevante.

Para TESS-V1 sólo hay un canal pero habrá con suerte de varios canales (colores). Seguramente prepararemos algunos que apunten a diferentes direcciones fijas y no sólo el cénit (45 deg en dirección norte, por ejemplo). Otro asunto importante es el campo de visión FOV.
Propongo emntonces que se tenga en cuenta añadiendo si hace falta algún campo.

